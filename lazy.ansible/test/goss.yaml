package:
  # System
  openssh-client:
    installed: true
  sshpass:
    installed: true
  pipx:
    installed: true
  shellcheck:
    installed: true
  # Docker
  docker-ce-cli:
    installed: true

group:
  # Base
  lazy:
    exists: true

user:
  # Base
  lazy:
    exists: true
    groups:
      - lazy
    shell: /bin/bash

file:
  # Git
  /etc/gitconfig:
    exists: true
    contains:
      - # Git config
  # Ssh
  /etc/ssh/ssh_config:
    exists: true
    contains:
      - # Ssh config

command:
  # Goss
  goss --version:
    exit-status: 0
    stdout:
      - goss version v{{ .Vars.system.goss.version }}
  # Ansible
  ansible --version:
    exit-status: 0
    stdout:
      - ansible [core {{ .Vars.system.ansible.version }}]
  sudo pipx runpip ansible-core list:
    exit-status: 0
    stdout:
      - "/ansible-core(\\s+){{ .Vars.system.ansible.version }}/"
      - "/hvac(\\s+)\\d+\\.\\d+\\.\\d+/"
  # Ansible Lint
  ansible-lint --nocolor --version:
    exit-status: 0
    stdout:
      - ansible-lint {{ (index .Vars.system "ansible-lint").version }}
  sudo pipx runpip ansible-lint list:
    exit-status: 0
    stdout:
      - "/ansible-lint(\\s+){{ (index .Vars.system "ansible-lint").version }}/"
      - "/pytest(\\s+)\\d+\\.\\d+\\.\\d+/"
  # Molecule
  FORCE_COLOR=0 molecule --version:
    exit-status: 0
    stdout:
      - molecule {{ .Vars.system.molecule.version }}
      - "/docker:\\d+\\.\\d+\\.\\d+ from molecule_plugin/"
  sudo pipx runpip molecule list:
    exit-status: 0
    stdout:
      - "/molecule(\\s+){{ .Vars.system.molecule.version }}/"
      - "/molecule-plugins(\\s+)\\d+\\.\\d+\\.\\d+/"
