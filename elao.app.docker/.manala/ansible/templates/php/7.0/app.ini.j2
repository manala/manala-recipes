{%- set config = item.config|default({}) -%}

{{ config | manala.roles.php_config_parameter('display_errors', default=True) }}
{{ config | manala.roles.php_config_parameter('display_startup_errors', default=True) }}
{{ config | manala.roles.php_config_parameter('error_reporting', default='E_ALL') }}
{{ config | manala.roles.php_config_parameter('html_errors', default=True) }}
{{ config | manala.roles.php_config_parameter('log_errors', default=True) }}
{{ config | manala.roles.php_config_parameter('max_input_time', default=60) }}
{{ config | manala.roles.php_config_parameter('output_buffering', default=4096) }}
{{ config | manala.roles.php_config_parameter('register_argc_argv', default=False) }}
{{ config | manala.roles.php_config_parameter('request_order', default='GP') }}
{{ config | manala.roles.php_config_parameter('short_open_tag', default=False) }}
{{ config | manala.roles.php_config_parameter('track_errors', default=True) }}
{{ config | manala.roles.php_config_parameter('variables_order', default='GPCS') }}
{{ config | manala.roles.php_config_parameter('expose_php', default=True) }}
{{ config | manala.roles.php_config_parameter('memory_limit', default='512M') }}
{{ config | manala.roles.php_config_parameter('session.gc_divisor', default=1000) }}
{{ config | manala.roles.php_config_parameter('session.hash_bits_per_character', default=5) }}
{{ config | manala.roles.php_config_parameter('url_rewriter.tags', default='\'a=href,area=href,frame=src,input=src,form=fakeentry\'') }}

{# Error log #}
{{ config | manala.roles.php_config_parameter('error_log', default='/var/log/php' ~ manala_php_version|string ~ '/error.log') }}

{# Enable apc in cli as soon as apcu/apcu-bc extension is installed #}
{{ config | manala.roles.php_config_parameter('apc.enable_cli', default=True) }}

; Switch whether to compile assertions at all (to have no overhead at run-time)
; -1: Do not compile at all
;  0: Jump over assertion at run-time
;  1: Execute assertions
; Changing from or to a negative value is only possible in php.ini! (For turning assertions on and off at run-time, see assert.active, when zend.assertions = 1)
; Default Value: 1
; Development Value: 1
; Production Value: -1
; http://php.net/zend.assertions
{{ config | manala.roles.php_config_parameter('zend.assertions', default=1) }}

{# See: http://stackoverflow.com/questions/12905404/symfony2-slow-initialization-time #}
{{ config | manala.roles.php_config_parameter('realpath_cache_size', default='4096k') }}
{{ config | manala.roles.php_config_parameter('realpath_cache_ttl', default=7200) }}

{{ config | manala.roles.php_config(exclude=[
  'display_errors',
  'display_startup_errors',
  'error_reporting',
  'html_errors',
  'log_errors',
  'max_input_time',
  'output_buffering',
  'register_argc_argv',
  'request_order',
  'short_open_tag',
  'track_errors',
  'variables_order',
  'expose_php',
  'memory_limit',
  'session.gc_divisor',
  'session.hash_bits_per_character',
  'url_rewriter.tags',
  'error_log',
  'apc.enable_cli',
  'zend.assertions',
  'realpath_cache_size',
  'realpath_cache_ttl',
]) -}}
